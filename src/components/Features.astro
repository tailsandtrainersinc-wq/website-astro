---
import { getCollection } from "astro:content";
import ScrollReveal from "./ScrollReveal.tsx";
import { Icon } from "astro-icon/components";

const features = (await getCollection("features")).sort(
  (a, b) => (a.data.order ?? 0) - (b.data.order ?? 0)
);
const introCopy = "Our mission is built on education, inclusion, and community support for LGBTQ individuals and allies.";
---

<section id="features" class="max-w-6xl mx-auto px-4 py-20">
  <ScrollReveal client:idle delay={0.1}>
    <h2 class="font-[var(--font-display)] text-4xl font-bold text-cream text-center mb-4" style="font-size: var(--text-heading)">What We Do</h2>
    <p class="text-taupe text-center max-w-2xl mx-auto mb-12">
      {introCopy}
    </p>
  </ScrollReveal>
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
    {features.map((entry, i) => {
      const { title, description, icon } = entry.data;
      const delay = 0.2 + i * 0.1;
      return (
        <ScrollReveal client:idle delay={delay} mode="pad">
          <a href={`/features/${entry.id}`} class="block p-6 bg-leather-raised/80 rounded-xl border border-brass/15 hover:border-brass/40 hover:shadow-lg hover:shadow-brass/10 transition-all group cursor-reactive">
            <div class="w-12 h-12 bg-brass/15 rounded-lg flex items-center justify-center mb-4 text-brass group-hover:bg-brass/25 transition-colors">
              <Icon name={icon} class="w-6 h-6" aria-hidden="true" />
            </div>
            <h3 class="text-xl font-semibold text-cream mb-2 font-[var(--font-display)]">{title}</h3>
            <p class="text-taupe">{description}</p>
          </a>
        </ScrollReveal>
      );
    })}
  </div>
</section>
